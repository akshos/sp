RDREC   START   1000
0       LDX     ZERO
0       LDA     ZERO
RLOOP   TD      INPUT
0       JEQ     RLOOP
0       RD      INPUT
0       COMP    ZERO
0       JEQ     EXIT
0       STCH    BUFFER
0       TIX     MAXLEN
0       JLT     RLOOP
EXIT    STX     LENGTH
INPUT   BYTE    X'F1'
MAXLEN  WORD    4096
ZERO    WORD    0
BUFFER  RESB    4096
0       END     RDREC
